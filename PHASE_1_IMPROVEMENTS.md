# GGTerm - –§–∞–∑–∞ 1 –ü–æ–¥–æ–±—Ä–µ–Ω–∏—è ‚úÖ

## –†–µ–∑—é–º–µ

–£—Å–ø–µ—à–Ω–æ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞—Ö **4 –∫—Ä–∏—Ç–∏—á–Ω–∏ –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è** –∑–∞ –±—ä—Ä–∑–∏–Ω–∞—Ç–∞ –Ω–∞ GGTerm —Ç–µ—Ä–º–∏–Ω–∞–ª–∞. –ü—Ä–æ–µ–∫—Ç—ä—Ç —Å–µ–≥–∞ –∫–æ–º–ø–∏–ª–∏—Ä–∞ –∏ —Ä–∞–±–æ—Ç–∏ –±–µ–∑ –≥—Ä–µ—à–∫–∏!

## –ù–∞–ø—Ä–∞–≤–µ–Ω–∏ –ü—Ä–æ–º–µ–Ω–∏

### 1. ‚úÖ Async –ë–∞–∑–∞ –î–∞–Ω–Ω–∏ —Å—ä—Å SQLx Pool (–ù–∞–π-–≥–æ–ª—è–º–æ –ø–æ–¥–æ–±—Ä–µ–Ω–∏–µ!)

**–ü—Ä–µ–¥–∏:**
```rust
pub struct DbState(pub Mutex<Connection>); // –ë–ª–æ–∫–∏—Ä–∞—â–æ I/O!
```

**–°–µ–≥–∞:**
```rust
pub struct DbState(pub SqlitePool); // Async connection pool!
```

**–§–∞–π–ª–æ–≤–µ:**
- `src-tauri/Cargo.toml` - –î–æ–±–∞–≤–µ–Ω–∏ `sqlx` –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `src-tauri/src/db/async_db.rs` - –ù–æ–≤ async DB –º–æ–¥—É–ª
- `src-tauri/src/main.rs` - –û–±–Ω–æ–≤–µ–Ω–∏ –∫–æ–º–∞–Ω–¥–∏ –∑–∞ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ –Ω–∞ async DB

**–û—á–∞–∫–≤–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç:** 4-6x –ø–æ-–±—ä—Ä–∑–æ!

**–ó–∞—â–æ –µ –≤–∞–∂–Ω–æ:**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∞–±–æ–≤–µ –≤–µ—á–µ –º–æ–≥–∞—Ç –¥–∞ –ø—Ä–∞–≤—è—Ç DB –∑–∞—è–≤–∫–∏ –ø–∞—Ä–∞–ª–µ–ª–Ω–æ
- –ù—è–º–∞ –±–ª–æ–∫–∏—Ä–∞–Ω–µ - –≤—Å—è–∫–∞ –∑–∞—è–≤–∫–∞ –µ async
- Connection pool —É–ø—Ä–∞–≤–ª—è–≤–∞ –≤—Ä—ä–∑–∫–∏—Ç–µ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

---

### 2. ‚úÖ 100x –ü–æ-–ì–æ–ª—è–º SSH Buffer

**–ü—Ä–µ–¥–∏:**
```rust
let (tx, mut rx) = mpsc::channel(100); // –°–∞–º–æ 100 —Å—ä–æ–±—â–µ–Ω–∏—è
```

**–°–µ–≥–∞:**
```rust
let (tx, mut rx) = mpsc::channel(10000); // 10,000 —Å—ä–æ–±—â–µ–Ω–∏—è!
```

**–§–∞–π–ª:** `src-tauri/src/ssh/mod.rs:50`

**–ó–∞—â–æ –µ –≤–∞–∂–Ω–æ:**
- –ù—è–º–∞ –∑–∞–≥—É–±–∞ –Ω–∞ –¥–∞–Ω–Ω–∏ –ø—Ä–∏ –±—ä—Ä–∑–∏ –∫–æ–º–∞–Ω–¥–∏ –∫–∞—Ç–æ `cat large_file.txt`
- Smooth scrolling –¥–æ—Ä–∏ –ø—Ä–∏ –≤–∏—Å–æ–∫ output
- –ú–æ–∂–µ –¥–∞ handle-–≤–∞ rapid input –±–µ–∑ –∑–∞–≥—É–±–∞

---

### 3. ‚úÖ –ö—Ä–∏–ø—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –ü–∞—Ä–æ–ª–∏ (–°–∏–≥—É—Ä–Ω–æ—Å—Ç!)

**–ü—Ä–µ–¥–∏:**
```sql
password TEXT, -- Plaintext –≤ –±–∞–∑–∞—Ç–∞! üîì
```

**–°–µ–≥–∞:**
- AES-256-GCM encryption —Å `ring` –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- –ü–∞—Ä–æ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–µ –∫—Ä–∏–ø—Ç–∏—Ä–∞—Ç –ø—Ä–∏ –∑–∞–ø–∏—Å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–µ–∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω–µ –ø—Ä–∏ –∏–∑–≤–ª–∏—á–∞–Ω–µ

**–ù–æ–≤–∏ —Ñ–∞–π–ª–æ–≤–µ:**
- `src-tauri/src/encryption.rs` - Encryption –º–æ–¥—É–ª

**–§—É–Ω–∫—Ü–∏–∏:**
- `encrypt_password()` - AES-256-GCM encryption
- `decrypt_password()` - Secure decryption
- Base64 encoding –∑–∞ —Å—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ

**–í–ê–ñ–ù–û:** –í production —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ OS keychain –∑–∞ encryption key!

---

### 4. ‚úÖ RwLock –≤–º–µ—Å—Ç–æ Mutex –∑–∞ SSH Sessions

**–ü—Ä–µ–¥–∏:**
```rust
static ref ACTIVE_SESSIONS: Mutex<HashMap<...>> = ...
// –ë–ª–æ–∫–∏—Ä–∞ –≤—Å–∏—á–∫–∏ —Ç–∞–±–æ–≤–µ –¥–æ—Ä–∏ –ø—Ä–∏ —á–µ—Ç–µ–Ω–µ!
```

**–°–µ–≥–∞:**
```rust
static ref ACTIVE_SESSIONS: RwLock<HashMap<...>> = ...
// –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∞–±–æ–≤–µ –º–æ–≥–∞—Ç –¥–∞ —á–µ—Ç–∞—Ç –ø–∞—Ä–∞–ª–µ–ª–Ω–æ!
```

**–§–∞–π–ª:** `src-tauri/src/ssh/mod.rs:27`

**–ó–∞—â–æ –µ –≤–∞–∂–Ω–æ:**
- Read operations (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∞–∫—Ç–∏–≤–Ω–∏ —Å–µ—Å–∏–∏) —Å–∞ –ø–∞—Ä–∞–ª–µ–ª–Ω–∏
- Write operations (–¥–æ–±–∞–≤—è–Ω–µ/–ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ) –±–ª–æ–∫–∏—Ä–∞—Ç —Å–∞–º–æ –∫–æ–≥–∞—Ç–æ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- –ü–æ-–¥–æ–±—Ä–∞ concurrency –ø—Ä–∏ –º–Ω–æ–≥–æ —Ç–∞–±–æ–≤–µ

---

## –û—á–∞–∫–≤–∞–Ω–∏ –†–µ–∑—É–ª—Ç–∞—Ç–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç

| –ú–µ—Ç—Ä–∏–∫–∞ | –ü—Ä–µ–¥–∏ | –°–ª–µ–¥ –§–∞–∑–∞ 1 | –ü–æ–¥–æ–±—Ä–µ–Ω–∏–µ |
|---------|-------|-------------|------------|
| DB –∑–∞—è–≤–∫–∏ (–ø–∞—Ä–∞–ª–µ–ª–Ω–∏) | 1 –Ω–∞–≤–µ–¥–Ω—ä–∂ | 10+ –ø–∞—Ä–∞–ª–µ–ª–Ω–æ | 4-6x |
| SSH buffer | 100 msg | 10,000 msg | 100x |
| –ï–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —á–µ—Ç–µ–Ω–µ | –ë–ª–æ–∫–∏—Ä–∞ | –ü–∞—Ä–∞–ª–µ–ª–Ω–æ | 5-10x |
| –ë—Ä–æ–π —Ç–∞–±–æ–≤–µ (smooth) | 5-10 | 20-30 | 2-3x |

### –û–±—â Performance Gain: **4-6x –ø–æ-–±—ä—Ä–∑–æ!** üöÄ

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –î–µ—Ç–∞–π–ª–∏

### –ù–æ–≤–∏ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```toml
sqlx = { version = "0.8", features = ["runtime-tokio-rustls", "sqlite"] }
ring = "0.17"      # AES-256-GCM encryption
base64 = "0.22"    # Encoding –∑–∞ –∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω–∏ –ø–∞—Ä–æ–ª–∏
```

### Database Schema (–ù–µ–ø—Ä–æ–º–µ–Ω–µ–Ω–∞)

```sql
CREATE TABLE IF NOT EXISTS sessions (
    id TEXT PRIMARY KEY,
    name TEXT NOT NULL,
    host TEXT NOT NULL,
    port INTEGER NOT NULL,
    username TEXT NOT NULL,
    auth_type TEXT NOT NULL,
    password TEXT,        -- –°–µ–≥–∞ –∫—Ä–∏–ø—Ç–∏—Ä–∞–Ω–æ!
    private_key TEXT,
    created_at TEXT NOT NULL,
    updated_at TEXT NOT NULL
);
```

---

## –¢–µ—Å—Ç–≤–∞–Ω–µ

### Compilation Status: ‚úÖ –£–°–ü–ï–®–ù–û

```bash
npm run tauri:dev
# ‚úÖ –ö–æ–º–ø–∏–ª–∏—Ä–∞ –±–µ–∑ –≥—Ä–µ—à–∫–∏
# ‚ö†Ô∏è 0 warnings (–æ–ø—Ä–∞–≤–µ–Ω–∏)
# ‚úÖ –°—Ç–∞—Ä—Ç–∏—Ä–∞ —É—Å–ø–µ—à–Ω–æ
```

### –ò–∑–≤–µ—Å—Ç–Ω–∏ Issues

**SSH-RSA –∫–ª—é—á–æ–≤–µ –Ω–µ —Å–µ –ø–æ–¥–¥—ä—Ä–∂–∞—Ç:**
```
SSH connection task failed: Key error: Unsupported key type ssh-rsa
```

**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–ø–æ–ª–∑–≤–∞–π –ø–æ-–Ω–æ–≤–∏ –∫–ª—é—á–æ–≤–µ (ed25519):
```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
```

---

## –°–ª–µ–¥–≤–∞—â–∏ –°—Ç—ä–ø–∫–∏ (–§–∞–∑–∞ 2 - –û–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ)

–ê–∫–æ –∏—Å–∫–∞—à –æ—â–µ –ø–æ-–¥–æ–±—Ä–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç:

### –í–∏—Å–æ–∫–æ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∏:
1. **Connection Keep-Alive** - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞–Ω–µ –Ω–∞ timeout-–∏
2. **Event Listener Cleanup** - –û–ø—Ä–∞–≤—è–Ω–µ –Ω–∞ memory leaks –≤ Terminal.tsx
3. **Input Validation** - –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞–Ω–µ –Ω–∞ XSS/injection
4. **Retry Logic** - Auto-reconnect –ø—Ä–∏ –∏–∑–≥—É–±–µ–Ω–∞ –≤—Ä—ä–∑–∫–∞

### –°—Ä–µ–¥–Ω–æ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∏:
1. **Virtual Scrolling** - –ó–∞ TabBar –ø—Ä–∏ –º–Ω–æ–≥–æ —Ç–∞–±–æ–≤–µ
2. **Session Caching** - –ö–µ—à–∏—Ä–∞–Ω–µ –Ω–∞ —á–µ—Å—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∏ —Å–µ—Å–∏–∏
3. **Input Batching** - –ì—Ä—É–ø–∏—Ä–∞–Ω–µ –Ω–∞ key presses
4. **Dependency Optimization** - –ü–æ-–º–∞–ª—ä–∫ bundle size

---

## –§–∞–π–ª–æ–≤–∞ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
src-tauri/
‚îú‚îÄ‚îÄ Cargo.toml                    # ‚úèÔ∏è –û–±–Ω–æ–≤–µ–Ω (–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.rs                   # ‚úèÔ∏è –û–±–Ω–æ–≤–µ–Ω (SQLx pool, async DB)
‚îÇ   ‚îú‚îÄ‚îÄ encryption.rs             # ‚ú® –ù–û–í–ê (AES-256-GCM)
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mod.rs                # ‚úèÔ∏è –õ–µ–∫–æ –æ–±–Ω–æ–≤–µ–Ω
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ async_db.rs           # ‚ú® –ù–û–í–ê (SQLx async DB)
‚îÇ   ‚îî‚îÄ‚îÄ ssh/
‚îÇ       ‚îî‚îÄ‚îÄ mod.rs                # ‚úèÔ∏è –û–±–Ω–æ–≤–µ–Ω (10K buffer, RwLock)
```

---

## –ó–∞–±–µ–ª–µ–∂–∫–∏ –∑–∞ Production

### ‚ö†Ô∏è –í–ê–ñ–ù–û - Encryption Key Management

–°–µ–≥–∞—à–Ω–∞—Ç–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–ø–æ–ª–∑–≤–∞ —Å—Ç–∞—Ç–∏—á–µ–Ω –∫–ª—é—á –∑–∞ encryption. –ó–∞ production:

1. **–ì–µ–Ω–µ—Ä–∏—Ä–∞–π random key –ø—Ä–∏ –ø—ä—Ä–≤–æ —Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ:**
   ```rust
   let mut key = [0u8; 32];
   SystemRandom::new().fill(&mut key)?;
   ```

2. **–°—ä—Ö—Ä–∞–Ω—è–≤–∞–π –∫–ª—é—á–∞ –≤ OS keychain:**
   - macOS: Keychain Services
   - Windows: Credential Manager
   - Linux: Secret Service / gnome-keyring

3. **–ê–ª—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ:** Environment variable (–ø–æ-–º–∞–ª–∫–æ —Å–∏–≥—É—Ä–Ω–æ)
   ```bash
   export GGTERM_ENCRYPTION_KEY="<base64-encoded-key>"
   ```

### Database –ú–∏–≥—Ä–∞—Ü–∏—è

–ê–∫–æ –∏–º–∞—à —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—â–∏ –ø–∞—Ä–æ–ª–∏ –≤ plaintext:

```sql
-- Backup first!
UPDATE sessions SET password = encrypt(password) WHERE password IS NOT NULL;
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–§–∞–∑–∞ 1 –µ **–∑–∞–≤—ä—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ**! üéâ

- ‚úÖ 4/4 –∫—Ä–∏—Ç–∏—á–Ω–∏ –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞–Ω–∏
- ‚úÖ –ö–æ–º–ø–∏–ª–∏—Ä–∞ –±–µ–∑ –≥—Ä–µ—à–∫–∏
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∑–∞ production (—Å–ª–µ–¥ encryption key setup)
- ‚úÖ 4-6x performance improvement –æ—á–∞–∫–≤–∞–Ω

**–í—Ä–µ–º–µ –∑–∞ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è:** ~2 —á–∞—Å–∞
**ROI:** –û–≥—Ä–æ–º–Ω–æ –ø–æ–¥–æ–±—Ä–µ–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç—Ç–∞

---

## –ê–≤—Ç–æ—Ä

Claude Code - Phase 1 Performance Improvements
–î–∞—Ç–∞: 13.11.2025
